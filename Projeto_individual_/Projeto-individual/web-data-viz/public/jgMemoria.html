<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Memória — Demon Slayer</title>
    <link rel="stylesheet" href="css/jgMemoria.css">
</head>

<body>
    <div class="game-container">
        <h1>Jogo da Memória — Demon Slayer</h1>

        <div id="stats">
            Jogadas: <span id="moves">0</span> &nbsp;|&nbsp;
            Tempo: <span id="timer">0</span>s
        </div>

        <div class="grid" id="grid"></div>
    </div>
</body>
</html>
</html>

<script>
    const personagens = [
    "css/imagens_videos_Site/tanjiro_kamado_card.jpeg",
    "css/imagens_videos_Site/nezuko.jpeg",
    "css/imagens_videos_Site/tela de bloqueio.jpeg",
    "css/imagens_videos_Site/Inosuke Hashibira.jpeg",
    "css/imagens_videos_Site/renkoguLindo.jpeg",
    "css/imagens_videos_Site/Giyu Tomioka 冨岡 義勇（とみおか ぎゆう）, 富冈义勇, Tomioka Giyū.jpg",
    "css/imagens_videos_Site/uzuigostosotesudo.jpeg",
    "css/imagens_videos_Site/Akaza.jpg",
    "css/imagens_videos_Site/muzan.jpg"
];

let deck = [...personagens, ...personagens];
deck.sort(() => Math.random() - 0.5);

const grid = document.getElementById("grid");
let firstCard = null;
let lock = false;
let moves = 0;
let timer = 0;
let interval = null;

document.getElementById("moves").innerText = moves;

function startTimer() {
    interval = setInterval(() => {
        timer++;
        document.getElementById("timer").innerText = timer;
    }, 1000);
}

deck.forEach((imgPath) => {
    const card = document.createElement("div");
    card.classList.add("card");
    card.dataset.img = imgPath;

    card.innerHTML = `
        <div class="front" style="background-image: url('${imgPath}')"></div>
        <div class="back"></div>
    `;

    card.addEventListener("click", () => flip(card));
    grid.appendChild(card);
});

function flip(card) {
    if (lock || card === firstCard || card.classList.contains("matched")) return;

    if (moves === 0 && timer === 0) startTimer();

    card.classList.add("flip");

    if (!firstCard) {
        firstCard = card;
        return;
    }

    moves++;
    document.getElementById("moves").innerText = moves;

    if (card.dataset.img === firstCard.dataset.img) {
        card.classList.add("matched");
        firstCard.classList.add("matched");

        firstCard = null;
        if (document.querySelectorAll(".matched").length === deck.length) {
            setTimeout(() => {
                alert(`Parabéns! Você finalizou o jogo em ${moves} jogadas e ${timer}s!`);
            }, 500);
        }
        return;
    }

    lock = true;
    setTimeout(() => {
        card.classList.remove("flip");
        firstCard.classList.remove("flip");
        firstCard = null;
        lock = false;
    }, 900);
}
</script>
